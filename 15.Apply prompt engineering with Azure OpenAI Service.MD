# Apply prompt engineering with Azure OpenAI (AOAI) Service

* Prompt engineering in AOAI is a technique that involves designing prompts for NLP models. This process improves accuracy and relevancy in responses, optimizing the performance of the model.

* Response quality from large language models (LLMs) in AOAI depends on the quality of the prompt provided. Improving prompt quality through various techniques is called prompt engineering.

# Understand prompt engineering
* What is prompt engineering
* LLMs are single models trained on huge amounts of data and can generate text, images, code, and creative content based on the most likely continuation of the prompt.

* Prompt engineering is the process of designing and optimizing prompts to better utilize LLMs. Designing effective prompts is critical to the success of prompt engineering, and it can significantly improve the AI model's performance on specific tasks. Providing relevant, specific, unambiguous, and well structured prompts can help the model better understand the context and generate more accurate responses.

 * For example, if we want an OpenAI model to generate product descriptions, we can provide it with a detailed description that describes the features and benefits of the product. By providing this context, the model can generate more accurate and relevant product descriptions.

# Write more effective prompts
* AOAI models are capable of generating responses to NL queries with remarkable accuracy. 
* However, the quality of the responses depends largely on how well the prompt is written. 
* Developers can optimize the performance of Azure OpenAI models by using different techniques in their prompts, resulting in more accurate and relevant responses.

* Provide clear instructions - For example 
    1. Prompt : Write a product description for a new water bottle
    2. Clear Prompt : Write a product description for a new water bottle that is 100% recycled. Be sure to include that
it comes in natural colors with no dyes, and each purchase removes 10 pounds of plastic from our oceans

* Format of instructions 
    1. Use section markers
        1. Split the instructions at the beginning or end of the prompt, within --- or ### blocks. More clearly differentiate between instructions and content. 
        2. For example:
          ``` mark
            Translate the text into French

            ---
            What's the weather going to be like today?
            ---
          ```
    2. Primary, supporting, and grounding content
        1. Including content for the model to use to respond with allows it to answer with greater accuracy. This content can be thought of in two ways: primary and supporting content.
        2. Primary content refers to content that is the subject of the query, such a sentence to translate or an article to summarize. This content is often included at the beginning or end of the prompt (as an instruction and differentiated by --- blocks), with instructions explaining what to do with it.
            1. For example, long article want to summarize. put it in a --- block in the prompt, then end with the instruction.
          ``` mark
              ---
              <insert full article here, as primary content>
              ---

              Summarize this article and identify three takeaways in a bulleted list
          ```
        3. Supporting content is content that may alter the response, but isn't the focus or subject of the prompt. Examples of supporting content include things like names, preferences, future date to include in the response, and so on. Providing supporting content allows the model to respond more completely, accurately, and be more likely to include the desired information.
            1. For example, promotional email, If you then add supporting content to the prompt specifying something specific you're looking for, the model can provide a more useful response. 
              ``` mark
                ---
                <insert full email here, as primary content>
                ---
                <the next line is the supporting content>
                Topics I'm very interested in: AI, webinar dates, submission deadlines

                 Extract the key points from the above email, and put them in a bulleted list:
              ```
        4. Grounding content allows the model to provide reliable answers by providing content for the model to draw answer from. Grounding content could be an essay or article that you then ask questions about, a company FAQ document, or information that is more recent than the data the model was trained on. If you need more reliable and current responses, or you need to reference unpublished or specific information, grounding content is highly recommended.
            1. Grounding content differs from primary content as it's the source of information to answer the prompt query, instead of the content being operated on for things like summarization or translation. For example, when provided an unpublished research paper on the history of AI, it can then answer questions using that grounding content.
              ``` mark
                ---
                <insert unpublished paper on the history of AI here, as grounding content>
                ---

                Where and when did the field of AI start?
              ```  
            2. This grounding data allows the model to give more accurate and informed answers that may not be part of the dataset it was trained on.

        5. Cues  - are leading words for the model to build upon, and often help shape the response in the right direction. They often are used with instructions, but don't always. Cues are particularly helpful if prompting the model for code generation. Current Azure OpenAI models can generate some interesting code snippets, however code generation will be covered in more depth in a future module.
              1. For example, creating a SQL query, provide instructions of what you need along with the beginning of the query:
                ``` mark
                    Write a join query to get customer names with purchases in the past 30 days between tables named orders and customer on customer ID. 

                    SELECT
                ```
              2. The model response picks up where the prompt left off, continuing in SQL, even though we never asked for a specific language. Other examples could be to help with python code, by giving code comments about the desired app and including import as a leading word at the end of the prompt, or similar in your desired language.
              3. Another example, given a large collection of customer reviews in a prompt, and ending with:
                  ``` mark
                      Summarize the reviews above:
                      Most common complaints:
                      -
                  ```    
              4. The model then knows to complete the statements based off the context provided in the reviews.
